<div fxLayout="column-reverse"
     fxLayout.gt-sm="row" fxLayoutGap="2rem"
     fxFlex="100%" fxFlexOffset="0%"
     fxFlex.gt-md="75%" fxFlexOffset.gt-md="12.5%"
     fxFlex.gt-lg="50%" fxFlexOffset.gt-lg="25%">
  <form fxFlex="65%" [formGroup]="addPropertyForm" (change)="onChange()" (ngSubmit)="onSubmit()">
    <mat-stepper #stepper linear orientation="vertical">
      <mat-step [stepControl]="basicInfo">
        <ng-template matStepLabel>Basic info</ng-template>

        <mat-card fxLayout="column" formGroupName="basicInfo">
          <mat-card-title>Basic info</mat-card-title>

          <mat-form-field appearance="outline">
            <mat-label>Name</mat-label>
            <input matInput type="text" formControlName="name"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>City</mat-label>
            <input matInput type="text" formControlName="city"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Property type</mat-label>

            <mat-select formControlName="propertyType">
              <mat-option *ngFor="let type of propertyTypes" [value]="type">{{ type }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Furnishing type</mat-label>

            <mat-select formControlName="furnishingType">
              <mat-option *ngFor="let type of furnishingTypes" [value]="type">{{ type }}</mat-option>
            </mat-select>
          </mat-form-field>

          <div class="mat-form-field-wrapper">
            <p>BHK</p>

            <mat-button-toggle-group formControlName="BHK" (valueChange)="onChange()">
              <mat-button-toggle fxFlex fxLayout="row" *ngFor="let bhk of [1, 2, 3, 4]" [value]="bhk">{{ bhk }}</mat-button-toggle>
            </mat-button-toggle-group>
          </div>

          <div class="mat-form-field-wrapper">
            <p>I want to</p>

            <mat-button-toggle-group formControlName="forSell" (valueChange)="onChange()">
              <mat-button-toggle fxFlex fxLayout="row" [value]="true">Sell</mat-button-toggle>
              <mat-button-toggle fxFlex fxLayout="row" [value]="false">Rent</mat-button-toggle>
            </mat-button-toggle-group>
          </div>

          <div fxLayoutAlign="end">
            <button matStepperNext mat-flat-button type="button" color="primary" [disabled]="basicInfo.invalid">
              <span>Next</span>
              <mat-icon inline>navigate_next</mat-icon>
            </button>
          </div>
        </mat-card>
      </mat-step>

      <mat-step [stepControl]="pricingAndArea">
        <ng-template matStepLabel>Pricing and area</ng-template>

        <mat-card fxLayout="column" formGroupName="pricingAndArea">
          <mat-card-title>Pricing and area</mat-card-title>

          <mat-form-field appearance="outline">
            <mat-label>Price</mat-label>
            <input matInput type="number" formControlName="price"/>
          </mat-form-field>

          <ng-container *ngIf="!propertyPreview.forSell">
            <mat-form-field appearance="outline">
              <mat-label>Security</mat-label>
              <input matInput type="number" formControlName="security"/>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Maintenance</mat-label>
              <input matInput type="number" formControlName="maintenance"/>
            </mat-form-field>
          </ng-container>

          <mat-form-field appearance="outline">
            <mat-label>Built area</mat-label>
            <input matInput type="number" formControlName="builtArea"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Carpet area</mat-label>
            <input matInput type="number" formControlName="carpetArea"/>
          </mat-form-field>

          <div fxLayoutAlign="space-between">
            <button matStepperPrevious mat-stroked-button type="button">
              <mat-icon inline>navigate_before</mat-icon>
              <span>Back</span>
            </button>

            <button matStepperNext mat-flat-button type="button" color="primary" [disabled]="pricingAndArea.invalid">
              <span>Next</span>
              <mat-icon inline>navigate_next</mat-icon>
            </button>
          </div>
        </mat-card>
      </mat-step>

      <mat-step [stepControl]="location">
        <ng-template matStepLabel>Location</ng-template>

        <mat-card fxLayout="column" formGroupName="location">
          <mat-card-title>Address</mat-card-title>

          <mat-form-field appearance="outline">
            <mat-label>Address</mat-label>
            <input matInput type="text" formControlName="address"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Floor</mat-label>
            <input matInput type="number" formControlName="floor"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Total floor</mat-label>
            <input matInput type="number" formControlName="totalFloor"/>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Landmark</mat-label>
            <input matInput type="text" formControlName="landmark"/>
          </mat-form-field>

          <div fxLayoutAlign="space-between">
            <button matStepperPrevious mat-stroked-button type="button">
              <mat-icon inline>navigate_before</mat-icon>
              <span>Back</span>
            </button>

            <button matStepperNext mat-flat-button type="button" color="primary" [disabled]="location.invalid">
              <span>Next</span>
              <mat-icon inline>navigate_next</mat-icon>
            </button>
          </div>
        </mat-card>
      </mat-step>

      <mat-step [stepControl]="otherDetails">
        <ng-template matStepLabel>Other details</ng-template>

        <mat-card fxLayout="column" formGroupName="otherDetails">
          <mat-card-title>Other details</mat-card-title>

          <div class="mat-form-field-wrapper">
            <p>Ready to move?</p>

            <mat-button-toggle-group formControlName="readyToMove" (valueChange)="onChange()">
              <mat-button-toggle fxFlex fxLayout="row" [value]="true">Yes</mat-button-toggle>
              <mat-button-toggle fxFlex fxLayout="row" [value]="false">No</mat-button-toggle>
            </mat-button-toggle-group>
          </div>

          <mat-form-field appearance="outline" *ngIf="propertyPreview.readyToMove; else notReady">
            <mat-label>Age of property</mat-label>
            <input matInput type="number" formControlName="age"/>
          </mat-form-field>

          <ng-template #notReady>
            <mat-form-field appearance="outline">
              <mat-label>Possession</mat-label>
              <input matInput formControlName="possession" [matDatepicker]="picker"/>

              <mat-datepicker #picker></mat-datepicker>
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            </mat-form-field>
          </ng-template>

          <div class="mat-form-field-wrapper">
            <p>Gated community</p>

            <mat-button-toggle-group formControlName="gatedCommunity">
              <mat-button-toggle fxFlex fxLayout="row" [value]="true">Yes</mat-button-toggle>
              <mat-button-toggle fxFlex fxLayout="row" [value]="false">No</mat-button-toggle>
            </mat-button-toggle-group>
          </div>

          <div class="mat-form-field-wrapper">
            <p>Main entrance</p>

            <mat-button-toggle-group formControlName="mainEntrance">
              <mat-button-toggle fxFlex fxLayout="row" *ngFor="let side of ['East', 'West', 'South', 'North']" [value]="side">{{ side }}</mat-button-toggle>
            </mat-button-toggle-group>
          </div>

          <mat-form-field appearance="outline">
            <mat-label>Description</mat-label>
            <textarea matInput type="text" rows="6" formControlName="description"></textarea>
          </mat-form-field>

          <div fxLayoutAlign="space-between">
            <button matStepperPrevious mat-stroked-button type="button">
              <mat-icon inline>navigate_before</mat-icon>
              <span>Back</span>
            </button>

            <button matStepperNext mat-flat-button type="button" color="primary" [disabled]="otherDetails.invalid">
              <span>Next</span>
              <mat-icon inline>navigate_next</mat-icon>
            </button>
          </div>
        </mat-card>
      </mat-step>

      <mat-step [stepControl]="photos">
        <ng-template matStepLabel>Photos</ng-template>

        <mat-card fxLayout="column" formGroupName="photos">
          <mat-card-title>Photos</mat-card-title>

          <div fxLayoutAlign="space-between">
            <button matStepperPrevious mat-stroked-button type="button">
              <mat-icon inline>navigate_before</mat-icon>
              <span>Back</span>
            </button>

            <div fxLayoutGap="1em">
              <button mat-flat-button type="reset" color="warn" (click)="stepper.reset()">
                <mat-icon inline>close</mat-icon>
                <span>Reset</span>
              </button>

              <button mat-flat-button type="submit" color="primary" [disabled]="photos.invalid">
                <mat-icon inline>check</mat-icon>
                <span>Submit</span>
              </button>
            </div>
          </div>
        </mat-card>
      </mat-step>
    </mat-stepper>
  </form>

  <app-property-card fxFlex="35%" [property]="propertyPreview" [previewOnly]="true"></app-property-card>
</div>
